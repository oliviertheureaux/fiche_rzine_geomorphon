library(rzine)
remotes::install_gitlab("rzine/package", host = "https://gitlab.huma-num.fr/", force = TRUE)
library(rzine)
install.packages("kableExtra")
install.packages("svglite")
R.Version()
devtools::install_github('r-lib/systemfonts')
# Packages
library(raster)
library(qgisprocess)
library(raster)
library(terra)
library(stars)
library(sf)
library(mapsf)
setwd("~/OT/GEO/GEO/MASTER/M2/SPATIAL_TREE_P/R/RZINE")
setwd("~/OT/GEO/GEO/MASTER/M2/SPATIAL_TREE_P/R/fiche_rzine_geomorphon")
# Sélection du BV via la GeoJSON ----
setwd("~/OT/GEO/GEO/MASTER/M2/SPATIAL_TREE_P/R/RZINE")
bv <- st_read("BassinVersantTopographique.json")
bv
library(dplyr)
bv <- bv %>% filter(bv$TopoOH == "Le Ribérot")
plot(bv)
bv <- bv %>% filter(bv$TopoOH == "La Séveraisse du torrent de Navette au Drac")
plot(bv)
bv <- st_read("BassinVersantTopographique.json")
bv <- bv %>% filter(bv$TopoOH == "La Séveraisse du torrent de Navette au Drac")
plot(bv)
bv <- st_read("BassinVersantTopographique.json")
bv <- bv %>% filter(bv$TopoOH == "La Tarentaine (Trentaine) de sa source au confluent de l'Eau Verte")
plot(bv)
bv <- st_read("BassinVersantTopographique.json")
riberot <- bv %>% filter(bv$TopoOH == "Le Ribérot")
severaisse <- bv %>% filter(bv$TopoOH == "La Séveraisse du torrent de Navette au Drac")
tarentaine <- bv %>% filter(bv$TopoOH == "La Tarentaine (Trentaine) de sa source au confluent de l'Eau Verte")
plot(severaisse)
# Création du raster virtuel Drac ----
setwd("C:/Users/thier/Downloads/mnt_63")
c <- "C:/Users/thier/Downloads/mnt_78_91"
v <- "C:/Users/thier/Downloads/new.vrt" # name of virtual raster
c <- "C:/Users/thier/Downloads/mnt_63"
v <- "C:/Users/thier/Downloads/new.vrt" # name of virtual raster
ras_lst <- list.files(c, full.names = T, pattern = ".asc$", recursive=T) # sélection de toutes les dalles
head(ras_lst)
terra::vrt(ras_lst, v, overwrite = T) # création du raster virtuel
ras <- read_stars(v)
st_crs(ras) = "EPSG:2154"
plot(ras, main = "dep 63")
mnt <- st_crop(ras,severaisse)
crs(ras)
st_crs(ras)
st_crs(severaisse)
st_crs(severaisse) = "EPSG:2154"
mnt <- st_crop(ras,severaisse)
plot(mnt)
st_transform(severaisse) = "EPSG:2154"
st_crs(severaisse) = "EPSG:2154"
st_transform(severaisse) = "EPSG:2154"
?st_transform
st_crs(severaisse, crs= "EPSG:2154")
severaisse <- bv %>% filter(bv$TopoOH == "La Séveraisse du torrent de Navette au Drac")
st_transform(severaisse, crs= "EPSG:2154")
mnt <- st_crop(ras,severaisse)
severaisse
st_crs(severaisse, crs= "EPSG:2154")
st_crs(severaisse, crs= "EPSG:2154")
st_transform(severaisse, crs= "EPSG:2154")
mnt <- st_crop(ras,severaisse)
st_crs(severaisse, crs= "EPSG:2154")
st_crs(severaisse) "EPSG:2154")
st_crs(severaisse)= "EPSG:2154"
st_transform(severaisse, crs= "EPSG:2154")
st_crs(severaisse)= "EPSG:2154"
mnt <- st_crop(ras,severaisse)
plot(mnt)
write_stars(mnt,"mnt_severaisse.tif")
plot(mnt)
plot(mnt)
mnt <- st_crop(ras,severaisse)
plot(mnt)
severaisse
st_crs(severaisse)= "EPSG:2154"
mnt <- st_crop(ras,severaisse)
plot(mnt)
ras,severaisse
ras
severaisse
plot(mnt)
ras
# Création du raster virtuel Drac ----
setwd("C:/Users/thier/Downloads/mnt_63")
c <- "C:/Users/thier/Downloads/mnt_63"
v <- "C:/Users/thier/Downloads/new.vrt" # name of virtual raster
ras_lst <- list.files(c, full.names = T, pattern = ".asc$", recursive=T) # sélection de toutes les dalles
head(ras_lst)
terra::vrt(ras_lst, v, overwrite = T) # création du raster virtuel
ras <- read_stars(v)
st_crs(ras) = "EPSG:2154"
plot(ras, main = "dep 63")
severaisse <- bv %>% filter(bv$TopoOH == "La Séveraisse du torrent de Navette au Drac")
st_transform(severaisse, crs= "EPSG:2154")
st_crs(severaisse)= "EPSG:2154"
mnt <- st_crop(ras, severaisse)
plot(mnt)
plot(severaisse)
mnt <- st_crop(ras, severaisse)
mnt
write_stars(mnt,"mnt_severaisse.tif")
severaisse
write_sf("severaisse.shp")
severaisse
st_write("severaisse.shp")
severaisse
st_write(severaisse, "severaisse.shp")
severaisse <- st_read("severaisse.shp")
mnt <- st_crop(ras, severaisse)
plot(mnt)
